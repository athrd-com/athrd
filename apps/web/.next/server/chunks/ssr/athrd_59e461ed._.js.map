{"version":3,"sources":["../../../../../../../athrd/node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../../../../athrd/apps/web/src/components/thread/tool-patch-block.tsx","../../../../../../../athrd/node_modules/.pnpm/lucide-react%400.454.0_react%4019.2.0/node_modules/lucide-react/src/icons/pencil-ruler.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { ChevronsDownUp, ChevronsUpDown, PencilRulerIcon } from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\n\ninterface ToolEditBlockProps {\n  patch: string;\n}\n\ntype DiffLine = {\n  type: \"add\" | \"del\" | \"ctx\";\n  content: string;\n};\n\n/**\n * ToolPatchBlock: Displays file changes with header showing path and stats\n * Parses a custom patch format\n */\nexport default function ToolPatchBlock({ patch }: ToolEditBlockProps) {\n  const [isCollapsed, setIsCollapsed] = useState(true);\n\n  const { filePath, lines, additions, deletions } = useMemo(() => {\n    const rawLines = patch.split(\"\\n\");\n    let filePath = \"\";\n    const diffLines: DiffLine[] = [];\n    let additions = 0;\n    let deletions = 0;\n    let isBody = false;\n\n    for (const line of rawLines) {\n      if (line.startsWith(\"*** Update File: \")) {\n        filePath = line.replace(\"*** Update File: \", \"\").trim();\n        continue;\n      }\n      if (line.trim() === \"@@\") {\n        isBody = true;\n        continue;\n      }\n      if (line.trim() === \"*** End Patch\") {\n        isBody = false;\n        continue;\n      }\n\n      if (isBody) {\n        if (line.startsWith(\"+\")) {\n          additions++;\n          diffLines.push({ type: \"add\", content: line.substring(1) });\n        } else if (line.startsWith(\"-\")) {\n          deletions++;\n          diffLines.push({ type: \"del\", content: line.substring(1) });\n        } else if (line.startsWith(\" \")) {\n          diffLines.push({ type: \"ctx\", content: line.substring(1) });\n        } else {\n          // Fallback for lines that might not have the space prefix but are context\n          // or empty lines\n          diffLines.push({ type: \"ctx\", content: line });\n        }\n      }\n    }\n\n    return { filePath, lines: diffLines, additions, deletions };\n  }, [patch]);\n\n  const displayedLines = isCollapsed ? lines.slice(0, 5) : lines;\n  const hasMoreLines = lines.length > 5;\n\n  return (\n    <div className=\"my-6 rounded-lg border border-white/10 overflow-hidden bg-[#111] shadow-sm\">\n      {/* File Header */}\n      <div\n        onClick={() => setIsCollapsed(!isCollapsed)}\n        className=\"flex items-center justify-between bg-white/5 border-b border-white/10 px-3 py-2 cursor-pointer hover:bg-white/10 transition-colors\"\n      >\n        <div className=\"flex items-center gap-2 text-xs font-mono text-gray-400 truncate\">\n          <PencilRulerIcon size={14} className=\"text-gray-500 shrink-0\" />\n          <span className=\"truncate text-gray-400 hover:text-gray-200 transition-colors hover:underline decoration-gray-700 underline-offset-2\">\n            {filePath || \"Unknown File\"}\n          </span>\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"flex gap-2 text-[10px] font-mono font-bold bg-black/30 px-2 py-0.5 rounded-full mr-2\">\n            <span className=\"text-green-500\">+{additions}</span>\n            <span className=\"text-red-500\">-{deletions}</span>\n          </div>\n          <button\n            className=\"cursor-pointer text-gray-500 hover:text-gray-300\"\n            aria-label={isCollapsed ? \"Expand\" : \"Collapse\"}\n          >\n            {isCollapsed ? (\n              <ChevronsDownUp size={14} />\n            ) : (\n              <ChevronsUpDown size={14} />\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Code Area */}\n      <div className=\"text-[13px] font-mono leading-5 overflow-x-auto\">\n        {displayedLines.map((line, idx) => (\n          <div\n            key={idx}\n            className={cn(\n              \"flex px-3 border-l-2 group\",\n              line.type === \"add\" &&\n                \"bg-[#1a3d28]/30 text-green-200 border-green-500/50\",\n              line.type === \"del\" &&\n                \"bg-[#42181c]/30 text-red-200 border-red-500/50\",\n              line.type === \"ctx\" &&\n                \"text-gray-500 border-transparent hover:bg-white/5\"\n            )}\n          >\n            <span className=\"w-4 shrink-0 select-none opacity-40 text-right mr-3\">\n              {line.type === \"add\" ? \"+\" : line.type === \"del\" ? \"-\" : \"\"}\n            </span>\n            <pre className=\"whitespace-pre-wrap break-all font-medium flex-1 min-w-0\">\n              {line.content}\n            </pre>\n          </div>\n        ))}\n        {isCollapsed && hasMoreLines && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setIsCollapsed(false);\n            }}\n            className=\"w-full px-3 py-2 text-center text-gray-500 text-xs cursor-pointer hover:bg-white/5 hover:text-gray-300\"\n          >\n            ... {lines.length - 5} more lines ...\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name PencilRuler\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMgNyA4LjcgMi43YTIuNDEgMi40MSAwIDAgMC0zLjQgMEwyLjcgNS4zYTIuNDEgMi40MSAwIDAgMCAwIDMuNEw3IDEzIiAvPgogIDxwYXRoIGQ9Im04IDYgMi0yIiAvPgogIDxwYXRoIGQ9Im0xOCAxNiAyLTIiIC8+CiAgPHBhdGggZD0ibTE3IDExIDQuMyA0LjNjLjk0Ljk0Ljk0IDIuNDYgMCAzLjRsLTIuNiAyLjZjLS45NC45NC0yLjQ2Ljk0LTMuNCAwTDExIDE3IiAvPgogIDxwYXRoIGQ9Ik0yMS4xNzQgNi44MTJhMSAxIDAgMCAwLTMuOTg2LTMuOTg3TDMuODQyIDE2LjE3NGEyIDIgMCAwIDAtLjUuODNsLTEuMzIxIDQuMzUyYS41LjUgMCAwIDAgLjYyMy42MjJsNC4zNTMtMS4zMmEyIDIgMCAwIDAgLjgzLS40OTd6IiAvPgogIDxwYXRoIGQ9Im0xNSA1IDQgNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pencil-ruler\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PencilRuler = createLucideIcon('PencilRuler', [\n  [\n    'path',\n    { d: 'M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13', key: 'orapub' },\n  ],\n  ['path', { d: 'm8 6 2-2', key: '115y1s' }],\n  ['path', { d: 'm18 16 2-2', key: 'ee94s4' }],\n  [\n    'path',\n    {\n      d: 'm17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17',\n      key: 'cfq27r',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n  ['path', { d: 'm15 5 4 4', key: '1mk7zo' }],\n]);\n\nexport default PencilRuler;\n"],"names":["module","exports","require","vendored","ReactDOM"],"mappings":"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","ignoreList":[0,2]}